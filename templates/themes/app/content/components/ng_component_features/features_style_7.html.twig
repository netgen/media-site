{# content \Netgen\IbexaSiteApi\API\Values\Content #}
{# location \Netgen\IbexaSiteApi\API\Values\Location #}

{% import "@ibexadesign/content/macros/links.html.twig" as links %}
{% set actions = not content.fields.link_1.empty or not content.fields.link_2.empty %}

{% block content %}
    <article class="view-component view-component-features features-style-7">
        {% if not content.fields.title.empty or not content.fields.description.empty or actions %}
            <header class="article-header">
                <div class="text">
                    <h2 class="title">{{ ng_render_field(content.fields.title) }}</h2>
                    {% if not content.fields.description.empty %}
                        <div class="short">
                            {{ ng_render_field(content.fields.description) }}
                        </div>
                    {% endif %}
                </div>
                {% if actions %}
                    <div class="actions">
                        {% if not content.fields.link_1.empty %}
                            {{ ng_render_field(
                                content.fields.link_1, {
                                    parameters: {
                                        css_class: 'btn btn-primary'
                                    }
                                }
                            ) }}
                        {% endif %}
                        {% if not content.fields.link_2.empty %}
                            {{ ng_render_field(
                                content.fields.link_2, {
                                    parameters: {
                                        css_class: 'btn btn-default'
                                    }
                                }
                            ) }}
                        {% endif %}
                    </div>
                {% endif %}
            </header>
        {% endif %}
        {% set items = ngsite_group_fields(content, "item") %}
        {% if items|length %}
            <div class="list-zigzag">
                {% for item in items %}
                    <div class="list-item">
                        {% if not item.title.empty or not item.description.empty %}
                            <div class="view-type view-type-zigzag vl9">
                                {% if item.image is defined and not item.image.empty %}
                                    <figure class="image">
                                        {% set alt_text = "" %}
                                        {% if item.title is defined and not item.title.empty %}
                                            {% set alt_text = item.title.value.text %}
                                        {% endif %}
                                        {{ links.item_image_link(item.link, item.image, "i770", alt_text) }}
                                    </figure>
                                {% endif %}
                                <div class="article-content">
                                    <header class="article-header">
                                        {% if item.highlight_title is defined and not item.highlight_title.empty %}
                                            <span class="eyebrow-title">{{ item.highlight_title.value.text }}</span>
                                        {% endif %}
                                        {% if item.title is defined and not item.title.empty %}
                                            <h2 class="title">{{ links.item_content_link(item.link, item.title.value.text) }}</h2>
                                        {% endif %}
                                    </header>
                                    {% if item.description is defined and not item.description.empty %}
                                        <div class="short">
                                            {{ ng_render_field(item.description) }}
                                        </div>
                                    {% endif %}
                                    {% if item.link is defined and not item.link.empty %}
                                        <div class="actions">
                                            {{ ng_render_field(
                                                item.link, {
                                                    parameters: {
                                                        css_class: 'btn btn-link'
                                                    }
                                                }
                                            ) }}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </article>
{% endblock %}
